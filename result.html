<head>
    <meta charset="utf8">
    <script src="advent_3.test"></script>
    <script src="advent_4.test"></script>
    <script src="advent_5.test"></script>
</head>
<body>
<ul>
    <li>
        <h3>День четвёртый:</h3>
        <ul>
            <li>
                <p>Empty</p>
                <p><b>Ответ:</b> <i>
                    <script>
                        
                    </script>
                </i></p>
            </li>
        </ul>
    </li>
    <li>
        <h3>День третий:</h3>
        <ul>
            <li>
                <p>Папа написал код от замка на бумажке рядом со шкафом, но кто-то пролил на запись чай. Некоторые цифры неразборчивые, не могу понять, что там: похоже на несколько цифр сразу. Перебрать все варианты мы не успеем, но есть идея попробовать 5-е по возрастанию значение кода, потому что 5 — это любимое число папы. В общем, у нас есть 5 чисел на бумажке. Вот, в файле (если неразборчиво, то пишу что вижу)</p>
                <p><b>Ответ:</b> <i>
                    <script>
                        const fn5 = ({ pointer, variants }) => {
                            let combinations = variants.reduce((a, b) => a * b.length, 1);

                            return variants.reduce((code, numbers) => {
                                combinations /= numbers.length;

                                const index = Math.ceil(pointer / combinations) - 1;

                                pointer -= index * combinations;

                                return code + numbers[index];
                            }, '');
                        };

                        document.write(fn5(fn5TestData));
                    </script>
                </i></p>
            </li>
            <li>
                <p>У вентилятора разные длины лопастей. Всего 212850 лопастей, длины равны l_i. Пароль от вентилятора — количество различных положений, которые вентилятор может принять, поворачиваясь на 360 / 212850 × i градуcов. Два положения считаются одинаковыми, если после перенумеровки последовательность длин лопастей совпадает с исходной.</p>
                <p><b>Ответ:</b> <i>
                    <script>
                        const fn4Slow = sequence => {
                            const uniqueSequences = [0];
                            const correctIndex = index => index < sequence.length ? index : index - sequence.length;
                            const isEqual = (index1, index2) => {
                                for (let i = 0; i < sequence.length; i++) {
                                    if (sequence[correctIndex(i + index1)] !== sequence[correctIndex(i + index2)])
                                        return false;
                                }

                                return true;
                            }

                            for (let i = 1; i < sequence.length; i++) {
                                if (uniqueSequences.every(index => !isEqual(index, i)))
                                    uniqueSequences.push(i);
                            }

                            return uniqueSequences.length;
                        };

                        const fn4 = sequence => {
                            const correctIndex = index => index < sequence.length ? index : index - sequence.length;
                            const isEqual = index => {
                                for (let i = 0; i < sequence.length; i++) {
                                    if (sequence[i] !== sequence[correctIndex(i + index)])
                                        return false;
                                }

                                return true;
                            }

                            for (let i = 1; i < sequence.length; i++) {
                                if (isEqual(i))
                                    return i;
                            }

                            return sequence.length;
                        };

                        document.write(fn4(fn4TestData));
                    </script>
                </i></p>
            </li>
        </ul>
    </li>
    <li>
        <h3>День второй:</h3>
        <ul>
            <li>
                <p>Ручка находится на высоте 1000000000, а у меня есть 100000 веревочек разной длины. Времени у нас мало, надо получить веревку длиной не меньше чем 1000000000, сделав минимальное количество узлов (то есть использовав минимальное количество веревок).</p>
                <q>Долбаные баги в тиньке, которые с первого раза не приняли правильный ответ и получил по минимуму балов из-за них. Обещали исправить.</q>
                <p><b>Ответ:</b> <i>
                    <script>
                        const fn3 = (height, slices) => {
                            slices = slices.sort((a, b) => b - a);

                            let sum = 0;

                            for (let i = 0; i < slices.length; i++) {
                                sum += slices[i];

                                if (sum >= height)
                                    return i;
                            }

                            return NaN;
                        };

                        const fn3Wrong2 = (height, slices) => {
                            let start = 0;
                            let min = slices.length - 1;
                            let sum = 0;

                            for (let i = 0; i < slices.length; i++) {
                                sum += slices[i];

                                if (sum >= height) {
                                    while (sum - slices[start] >= height) {
                                        sum -= slices[start];
                                        ++start;
                                    }

                                    min = Math.min(min, i - start);
                                }
                            }

                            return min;
                        };

                        const fn3Wrong3 = (height, slices) => {
                            let begin = 0;
                            let end = slices.length - 1;
                            let sum = 0;

                            while (sum < height)
                                sum += slices[begin++];
                            
                            sum = 0;

                            while (sum < height)
                                sum += slices[end--];

                            return Math.min(begin - 1, slices.length - end - 2);
                        };

                        const { height, slices } = fn3TestData;
                        
                        document.write(fn3(height, slices));
                    </script>
                </i></p>
            </li>
        </ul>
    </li>
    <li>
        <h3>День первый:</h3>
        <ul>
            <li>
                <p>В щитке 61429526 переключателей вверх и 61430729 переключателей вниз. Я помню, что для включения щитка нужно включить все переключатели: либо все вверх, либо все вниз. Но я не помню, вверх или вниз. Нам остается только выяснить, какое из двух положений правильное, и просто прощелкать все опытным путем. Но я переживаю, что это будет долго. Можешь посчитать, какого минимального количества щелчков мне гарантированно хватит, чтобы понять?</p>
                <p><b>Ответ:</b> <i>
                    <script>
                        const fn1 = (on, off) => on + off + Math.min(on, off);

                        document.write(fn1(61429526, 61430729));
                    </script>
                </i></p>
            </li>
            <li>
                <p>Мне нужно, чтобы две машинки двигались туда-сюда вдоль окна. Одна машинка будет ехать от левого края окна, доезжать до определенной точки и разворачиваться обратно, а вторая — делать то же самое, но от правого края окна. Важно, чтобы процесс повторялся для каждой машинки независимо. Можешь помочь рассчитать, через сколько времени после запуска машинки одновременно окажутся у края окна? Длина окна 945747, а координата точки, куда доезжает машинка, — 130713</p>
                <p><b>Ответ:</b> <i>
                    <script>
                        const fn2 = (length, point) => {
                            const time1 = point * 2;
                            const time2 = (length - point) * 2;

                            let step = { left: time1, right: time2 };

                            while (step.left !== step.right) {
                                if (step.left < step.right)
                                    step.left += time1;
                                else
                                    step.right += time2;
                            }

                            return step.left;
                        };

                        document.write(fn2(945747, 130713));
                    </script>
                </i></p>
            </li>
        </ul>
    </li>
</ul>
</body>
